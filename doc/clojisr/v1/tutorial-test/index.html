<!DOCTYPE html>
<html><html><head><script language="JavaScript">
  socket= new WebSocket('ws://localhost:5678/watch-reload');
  socket.onopen= function() {
                           socket.send ('watch') ;
                           };
  socket.onmessage= function(s) {
                               if                                                          ( s.data == 'started') {
                                                                                                                   console.log ("Watching started") ;
                                                                                                                   }                                 else                   if ( s.data == 'reload') {
                                                                                                                                                                                                      console.log            ("reloading") ;
                                                                                                                                                                                                      window.location.reload ()            ;
                                                                                                                                                                                                      } else                   {
                                                                                                                                                                                                                                alert('Don\'t know what to do with [' + s.data + ']');
                                                                                                                                                                                                                                }
                               };
  </script>
  <style type="text/css">body {
    background-image: linear-gradient(0deg, #fff4e8 25%, #fef8e9 25%, #fef8e9 50%, #fff4e8 50%, #fff4e8 75%, #fef8e9 75%, #fef8e9 100%);
    background-size: 32.00px 32.00px;
    color: #3e3c3f;
    font-family: "Source Sans Pro", sans-serif;
    font-size: 14px;
    padding-left: 10px;
    padding-right: 10px;
    margin: 0;
}

.nspin {
    border-radius: 10px;
    background: #d7d2c3;
    padding: 10px;
    margin-bottom: 5px;
}

.nspout {
    border-radius: 10px;
    background: #e4ded0;
    padding: 10px;
    margin-left: 10px;
}

.nspbox {
    padding-bottom: 5px;
    margin: 0;
}

.FAILED { color: #bb0000; }
.PASSED { color: #009500; }

p {
    margin-top: 0;
    margin-bottom: 5px; }

h1, h2, h3, h4, h5, h6 {
    margin-top: 10px;
    margin-bottom: 5px;
    color: #720000;
}

a:visited { color: #5E5E59; }
a:link { color: #720000; }
tr:nth-child(even) { background-color: #e4ded0; }
th { background-color: #d7d2c3; }

</style><script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/lang-clj.js" type="text/javascript"></script><link href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" /><script src="https://code.jquery.com/jquery-3.4.1.min.js" type="text/javascript"></script><script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" type="text/javascript"></script><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet" type="text/css" /></head><body><div><h1>clojisr.v1.tutorial-test</h1><div><i><small><a href="https://github.com/scicloj/clojisr/tree/master/test/clojisr/v1/tutorial_test.clj">clojisr.v1.tutorial-test</a> - created by <a href="https://github.com/scicloj/notespace">notespace</a>, Sun Nov 26 20:33:16 CET 2023.</small></i><hr /></div><div>Checks: <b class="PASSED">60 PASSED </b><hr /></div><div>Table of contents<ul><li><a href="#basic-examples">basic-examples</a></li><li><a href="#functions">functions</a></li><li><a href="#R-dataframes-and-tech.ml.dataset">R-dataframes-and-tech.ml.dataset</a></li><li><a href="#ROBjects">ROBjects</a></li><li><a href="#generating-code">generating-code</a></li><li><a href="#running-generated-code">running-generated-code</a></li><li><a href="#requiring-R-packages">requiring-R-packages</a></li><li><a href="#data-visualization">data-visualization</a></li><li><a href="#intermediary-representation-as-Java-objects">intermediary-representation-as-Java-objects</a></li><li><a href="#more-data-conversion-examples">more-data-conversion-examples</a></li><li><a href="#inspecting-R-functions">inspecting-R-functions</a></li><li><a href="#R-function-arglists">R-function-arglists</a></li></ul><hr /></div><div class="nspbox"><div><h1>Clojisr tutorial</h1></div></div><div class="nspbox"><a id="basic-examples"> </a><div><h2>Basic examples</h2></div></div><div class="nspbox"><div><p>Let us start by some basic usage examples of Clojisr.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(require&nbsp;'[clojisr.v1.r&nbsp;:as&nbsp;r&nbsp;:refer</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[r&nbsp;eval-r->java&nbsp;r->java&nbsp;java->r&nbsp;java->clj&nbsp;java->native-clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clj->java&nbsp;r->clj&nbsp;clj->r&nbsp;->code&nbsp;r+&nbsp;colon&nbsp;require-r]]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[clojisr.v1.robject&nbsp;:as&nbsp;robject]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[clojisr.v1.session&nbsp;:as&nbsp;session]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[tech.v3.dataset&nbsp;:as&nbsp;dataset])</code></div></div><div class="nspbox"><div><p>First, let us make sure that we use the Rserve backend (in case we were using another engine instead earlier), and that there are no R sessions currently running. This is typically not needed if you just started working. Here, we do it just in case.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r/set-default-session-type!&nbsp;:rserve)&nbsp;(r/discard-all-sessions)</code></div></div><div class="nspbox"><div><p>Now let us run some R code, and keep a Clojure handle to the return value.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;x&nbsp;(r&nbsp;"1+2"))</code></div></div><div class="nspbox"><div><p>The thing we created is something called an ROBject.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(class&nbsp;x)</code></div><div class="nspout"><code class="prettyprint lang-clj">clojisr.v1.robject.RObject</code></div></div><div class="nspbox"><div><p>If we wish, we can convert an ROBject to Clojure: </p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[3.0]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[3.0]]</code></div></div><div class="nspbox"><div><p>Let us see more examples of creating ROBjects and converting them to Clojure: </p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"list(A=1,B=2,'#123strange<text>&nbsp;()'=3)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;{:A&nbsp;[1.0],&nbsp;:B&nbsp;[2.0],&nbsp;"#123strange<text>&nbsp;()"&nbsp;[3.0]}))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;{:A&nbsp;[1.0],&nbsp;:B&nbsp;[2.0],&nbsp;"#123strange<text>&nbsp;()"&nbsp;[3.0]}]</code></div></div><div class="nspbox"><div><p>In the other direction, we can convert Clojure data to R data. Note that <code>nil</code> is turned to <code>NA</code>.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->&nbsp;[1&nbsp;nil&nbsp;3]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clj->r)</code></div><div class="nspout"><code class="prettyprint lang-clj">[1]&nbsp;&nbsp;1&nbsp;NA&nbsp;&nbsp;3</code></div></div><div class="nspbox"><div><p>We can run code on a separate R session (specify session-args which are different than the default ones).</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->&nbsp;"1+2"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r&nbsp;:session-args&nbsp;{:session-name&nbsp;"mysession"})</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->>&nbsp;(check&nbsp;=&nbsp;[3.0])))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[3.0]]</code></div></div><div class="nspbox"><a id="functions"> </a><div><h2>Functions</h2></div></div><div class="nspbox"><div><p>An R function is also a Clojure function.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;f&nbsp;(r&nbsp;"function(x)&nbsp;x*10"))</code></div></div><div class="nspbox"><div><p>Let us apply it to Clojure data (implicitly converting that data to R).</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;5</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[50.0]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[50.0]]</code></div></div><div class="nspbox"><div><p>We can also apply it to R data.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"5*5"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[250.0]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[250.0]]</code></div></div><div class="nspbox"><div><p>Functions can get named arguments. Here we pass the <code>na.rm</code> argument, that tells R whether to remove missing values whenn computing the mean.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;((r&nbsp;"mean")&nbsp;[1&nbsp;nil&nbsp;3]&nbsp;:na.rm&nbsp;true)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[2.0]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[2.0]]</code></div></div><div class="nspbox"><div><p>Another example:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(let&nbsp;[f&nbsp;(r&nbsp;"function(w,x,y=10,z=20)&nbsp;w+x+y+z")]</br>&nbsp;&nbsp;&nbsp;(->>&nbsp;[(f&nbsp;1&nbsp;2)&nbsp;(f&nbsp;1&nbsp;2&nbsp;:y&nbsp;100)&nbsp;(f&nbsp;1&nbsp;2&nbsp;:z&nbsp;100)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(map&nbsp;r->clj)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[[33.0]&nbsp;[123.0]&nbsp;[113.0]])))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;([33.0]&nbsp;[123.0]&nbsp;[113.0])]</code></div></div><div class="nspbox"><div><p>Some functions are already created in Clojisr and given special names for convenience. Here are some examples:</p></div></div><div class="nspbox"><div><p>R addition:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(r+&nbsp;1&nbsp;2&nbsp;3)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[6]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[6]]</code></div></div><div class="nspbox"><div><p>R colon (<code>:</code>), for creating a range of integers, like <code>0:9</code>:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(colon&nbsp;0&nbsp;9)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;(range&nbsp;10)))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[0&nbsp;1&nbsp;2&nbsp;3&nbsp;4&nbsp;5&nbsp;6&nbsp;7&nbsp;8&nbsp;9]]</code></div></div><div class="nspbox"><a id="R-dataframes-and-tech.ml.dataset"> </a><div><h2>R dataframes and tech.ml.dataset datasets</h2></div></div><div class="nspbox"><div><p>At Clojure, we have a structure that is equivalent to R dataframes: a <a href='https://github.com/techascent/tech.ml.dataset'>tech.ml.dataset</a> dataset.</p><p>Let us create such a dataset, pass it to an R function to compute the row means, and then convert the return value back to Clojure.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(let&nbsp;[row-means&nbsp;(r&nbsp;"function(data)&nbsp;rowMeans(data)")]</br>&nbsp;&nbsp;&nbsp;(->>&nbsp;{:x&nbsp;[1&nbsp;2&nbsp;3],&nbsp;:y&nbsp;[4&nbsp;5&nbsp;6]}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset/->dataset</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row-means</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[2.5&nbsp;3.5&nbsp;4.5])))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[2.5&nbsp;3.5&nbsp;4.5]]</code></div></div><div class="nspbox"><div><p>Let us see some more dataset proccessing through R.</p></div></div><div class="nspbox"><div><p>Loading the R package <a href='https://dplyr.tidyverse.org/'>dplyr</a> (assuming it is installed).</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r&nbsp;"library(dplyr)")</code></div></div><div class="nspbox"><div><p>Using dplyr to process some Clojure dataset, and convert back to the resulting dataset.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(let&nbsp;[filter-by-x&nbsp;(r&nbsp;"function(data)&nbsp;filter(data,&nbsp;x>=2)")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add-z-column&nbsp;(r&nbsp;"function(data)&nbsp;mutate(data,&nbsp;z=x+y)")]</br>&nbsp;&nbsp;&nbsp;(->>&nbsp;{:x&nbsp;[1&nbsp;2&nbsp;3],&nbsp;:y&nbsp;[4&nbsp;5&nbsp;6]}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset/->dataset</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter-by-x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add-z-column</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;(fn&nbsp;[d]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;d</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset/mapseq-reader</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(=&nbsp;[{:x&nbsp;2,&nbsp;:y&nbsp;5,&nbsp;:z&nbsp;7}&nbsp;{:x&nbsp;3,&nbsp;:y&nbsp;6,&nbsp;:z&nbsp;9}]))))))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;_unnamed&nbsp;[2&nbsp;3]:</br></br>|&nbsp;:x&nbsp;|&nbsp;:y&nbsp;|&nbsp;:z&nbsp;|</br>|---:|---:|---:|</br>|&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;5&nbsp;|&nbsp;&nbsp;7&nbsp;|</br>|&nbsp;&nbsp;3&nbsp;|&nbsp;&nbsp;6&nbsp;|&nbsp;&nbsp;9&nbsp;|</br>]</code></div></div><div class="nspbox"><div><p><a href='https://tibble.tidyverse.org'>Tibbles</a>, which are a more recent R dataframe notion, are also supported, as a special case of data frames.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r&nbsp;"library(tibble)")</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(let&nbsp;[tibble&nbsp;(r&nbsp;"tibble")]&nbsp;(tibble&nbsp;:x&nbsp;[1&nbsp;2&nbsp;3]&nbsp;:y&nbsp;[4&nbsp;5&nbsp;6]))</code></div><div class="nspout"><code class="prettyprint lang-clj">#&nbsp;A&nbsp;tibble:&nbsp;3&nbsp;Ã—&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y</br>&nbsp;&nbsp;<int>&nbsp;<int></br>1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</br>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5</br>3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(let&nbsp;[tibble&nbsp;(r&nbsp;"tibble")]</br>&nbsp;&nbsp;&nbsp;(->>&nbsp;(tibble&nbsp;:x&nbsp;[1&nbsp;2&nbsp;3]&nbsp;:y&nbsp;[4&nbsp;5&nbsp;6])</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset/mapseq-reader</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[{:x&nbsp;1,&nbsp;:y&nbsp;4}&nbsp;{:x&nbsp;2,&nbsp;:y&nbsp;5}&nbsp;{:x&nbsp;3,&nbsp;:y&nbsp;6}])))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[{:x&nbsp;1,&nbsp;:y&nbsp;4}&nbsp;{:x&nbsp;2,&nbsp;:y&nbsp;5}&nbsp;{:x&nbsp;3,&nbsp;:y&nbsp;6}]]</code></div></div><div class="nspbox"><a id="ROBjects"> </a><div><h2>R objects</h2></div></div><div class="nspbox"><div><p>Clojisr holds handles to R objects, that are stored in memory at the R session, where they are assigned random names.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;one+two&nbsp;(r&nbsp;"1+2"))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;one+two</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;clojisr.v1.robject.RObject))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;clojisr.v1.robject.RObject]</code></div></div><div class="nspbox"><div><p>The name of an object is the place where it is held at R (inside an R <a href='http://adv-r.had.co.nz/Environments.html'>evnironment</a> called <code>.MEM</code>).</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(:object-name&nbsp;one+two)</code></div><div class="nspout"><code class="prettyprint lang-clj">".MEM$x92cd390ac17d4a25"</code></div></div><div class="nspbox"><a id="generating-code"> </a><div><h2>Generating code</h2></div></div><div class="nspbox"><div><p>Let us see the mechanism by which clojisr generates R code, and the rules defining it.</p></div></div><div class="nspbox"><div><p>Since we are playing a bit with the internals here, we will need a reference to the R session:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;session&nbsp;(session/fetch-or-make&nbsp;nil))</code></div></div><div class="nspbox"><div><p>For the following examples, we will use some <strong>dummy</strong> handles to R objects with given names:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;x&nbsp;(robject/->RObject&nbsp;"robject_x"&nbsp;session&nbsp;nil&nbsp;nil))</br>&nbsp;(def&nbsp;y&nbsp;(robject/->RObject&nbsp;"robject_y"&nbsp;session&nbsp;nil&nbsp;nil))</code></div></div><div class="nspbox"><div><p>.. and some <strong>real</strong> handles to R objects:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;minus-eleven&nbsp;(r&nbsp;"-11"))&nbsp;(def&nbsp;abs&nbsp;(r&nbsp;"abs"))</code></div></div><div class="nspbox"><div><p>The function <code>-&gt;code</code> generates R code according to a certain set of rules. Here we describe some of these rules briefly. We also wrote a dedicated tutorial about the rule set more thoroughly.</p></div></div><div class="nspbox"><div><p>For an ROBject, the generated code is just the ROBject name.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;"robject_x"))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;"robject_x"]</code></div></div><div class="nspbox"><div><p>For a clojure value, we use some form analysis and generate proper R string or values.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"hello"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;re-matches&nbsp;#"\"hello\"$"))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;"\"hello\""]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;[1&nbsp;2&nbsp;3]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;"c(1L,2L,3L)"))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;"c(1L,2L,3L)"]</code></div></div><div class="nspbox"><div><p>For a symbol, we generate the code with the corresponding R symbol.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->code&nbsp;'x)</code></div><div class="nspout"><code class="prettyprint lang-clj">"x"</code></div></div><div class="nspbox"><div><p>A sequential structure (list, vector, etc.) can be interpreted as a compound expression, for which code generation is defined accorting to the first list element.</p></div></div><div class="nspbox"><div><p>For a list beginning with the symbol <code>'function</code>, we generate an R function definition.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;x)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;"function(x,y)&nbsp;{x}"))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;"function(x,y)&nbsp;{x}"]</code></div></div><div class="nspbox"><div><p>For a vector instead of list, we create R vector.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;'[function&nbsp;[x&nbsp;y]&nbsp;x]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;"c(function,c(x,y),x)"))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;"c(function,c(x,y),x)"]</code></div></div><div class="nspbox"><div><p>For a list beginning with the symbol <code>'formula</code>, we generate an R <code>&#126;</code>-formula.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;'(formula&nbsp;x&nbsp;y)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;"(x~y)"))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;"(x~y)"]</code></div></div><div class="nspbox"><div><p>For a list beginning with a symbol known to be a binary operator, we generate nested calls.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;'(+&nbsp;x&nbsp;y&nbsp;z)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;"((x+y)+z)"))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;"((x+y)+z)"]</code></div></div><div class="nspbox"><div><p>For a list beginning with another symbol, we generate a function call with that symbol as the function name.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;'(f&nbsp;x)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;"f(x)"))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;"f(x)"]</code></div></div><div class="nspbox"><div><p>For a list beginning with an R object that is a function, we generate a function call with that object as the function. If you create the list using the quote sign (<code>'</code>), don't forget to unquote symbols refering to things you defined on the Clojure side.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;'(~abs&nbsp;x)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;re-matches&nbsp;#"\.MEM\$.*\(x\)"))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;".MEM$xea5550c6f2484cc0(x)"]</code></div></div><div class="nspbox"><div><p>All other sequential things (that is, those not beginning with a symbol or R function) are intepreted as data, converted implicitly R data representation.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;`(~abs&nbsp;(1&nbsp;2&nbsp;3))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;re-matches&nbsp;#"\.MEM\$.*\(c\(1L,2L,3L\)\)"))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;".MEM$xea5550c6f2484cc0(c(1L,2L,3L))"]</code></div></div><div class="nspbox"><div><p>Some more examples, showing how these rules compose:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->code&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;(f&nbsp;y)))</code></div><div class="nspout"><code class="prettyprint lang-clj">"function(x,y)&nbsp;{f(y)}"</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->code&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;(f&nbsp;~y)))</code></div><div class="nspout"><code class="prettyprint lang-clj">"function(x,y)&nbsp;{f(robject_y)}"</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->code&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;(+&nbsp;x&nbsp;y)))</code></div><div class="nspout"><code class="prettyprint lang-clj">"function(x,y)&nbsp;{(x+y)}"</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->code&nbsp;(list&nbsp;'function&nbsp;'[x&nbsp;y]&nbsp;(list&nbsp;'+&nbsp;'x&nbsp;'y)))</code></div><div class="nspout"><code class="prettyprint lang-clj">"function(x,y)&nbsp;{(x+y)}"</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->code&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;(print&nbsp;x)&nbsp;(f&nbsp;x)))</code></div><div class="nspout"><code class="prettyprint lang-clj">"function(x,y)&nbsp;{print(x);f(x)}"</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->code&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;(~abs&nbsp;x)))</code></div><div class="nspout"><code class="prettyprint lang-clj">"function(x,y)&nbsp;{.MEM$xea5550c6f2484cc0(x)}"</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->code&nbsp;'(~abs&nbsp;~minus-eleven))</code></div><div class="nspout"><code class="prettyprint lang-clj">".MEM$xea5550c6f2484cc0(.MEM$xb590c7e90bf54e4c)"</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->code&nbsp;'(~abs&nbsp;-11))</code></div><div class="nspout"><code class="prettyprint lang-clj">".MEM$xea5550c6f2484cc0(-11L)"</code></div></div><div class="nspbox"><div><p>Use syntax quote ` in case you want to use local bindings.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(let&nbsp;[minus-ten&nbsp;-10]&nbsp;(->code&nbsp;`(~abs&nbsp;~minus-ten)))</code></div><div class="nspout"><code class="prettyprint lang-clj">".MEM$xea5550c6f2484cc0(-10L)"</code></div></div><div class="nspbox"><a id="running-generated-code"> </a><div><h2>Running generated code</h2></div></div><div class="nspbox"><div><p>Clojure forms can be run as R code. Behind the scences, they are turned to R code using the <code>-&gt;code</code> function described above. For example:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;'(~abs&nbsp;~(range&nbsp;-3&nbsp;0))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[3&nbsp;2&nbsp;1]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[3&nbsp;2&nbsp;1]]</code></div></div><div class="nspbox"><div><p>Or, equivalently:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;'(~abs&nbsp;~(range&nbsp;-3&nbsp;0))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->code</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[3&nbsp;2&nbsp;1]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[3&nbsp;2&nbsp;1]]</code></div></div><div class="nspbox"><div><p>Let us repeat the basic examples from the beginning of this tutorial, this time generating code rather than writing it as Strings.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;x&nbsp;(r&nbsp;'(+&nbsp;1&nbsp;2)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[3]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[3]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;f&nbsp;(r&nbsp;'(function&nbsp;[x]&nbsp;(*&nbsp;x&nbsp;10))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;5</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[50]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[50]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"5*5"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[250.0]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[250.0]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(let&nbsp;[row-means&nbsp;(r&nbsp;'(function&nbsp;[data]&nbsp;(rowMeans&nbsp;data)))]</br>&nbsp;&nbsp;&nbsp;(->>&nbsp;{:x&nbsp;[1&nbsp;2&nbsp;3],&nbsp;:y&nbsp;[4&nbsp;5&nbsp;6]}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset/->dataset</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row-means</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[2.5&nbsp;3.5&nbsp;4.5])))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[2.5&nbsp;3.5&nbsp;4.5]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r&nbsp;'(library&nbsp;dplyr))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(let&nbsp;[filter-by-x&nbsp;(r&nbsp;'(function&nbsp;[data]&nbsp;(filter&nbsp;data&nbsp;(>=&nbsp;x&nbsp;2))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add-z-column&nbsp;(r&nbsp;'(function&nbsp;[data]&nbsp;(mutate&nbsp;data&nbsp;(=&nbsp;z&nbsp;(+&nbsp;x&nbsp;y)))))]</br>&nbsp;&nbsp;&nbsp;(->>&nbsp;{:x&nbsp;[1&nbsp;2&nbsp;3],&nbsp;:y&nbsp;[4&nbsp;5&nbsp;6]}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset/->dataset</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter-by-x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add-z-column</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj))</code></div><div class="nspout"><code class="prettyprint lang-clj">_unnamed&nbsp;[2&nbsp;3]:</br></br>|&nbsp;:x&nbsp;|&nbsp;:y&nbsp;|&nbsp;:z&nbsp;|</br>|---:|---:|---:|</br>|&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;5&nbsp;|&nbsp;&nbsp;7&nbsp;|</br>|&nbsp;&nbsp;3&nbsp;|&nbsp;&nbsp;6&nbsp;|&nbsp;&nbsp;9&nbsp;|</code></div></div><div class="nspbox"><a id="requiring-R-packages"> </a><div><h2>Requiring R packages</h2></div></div><div class="nspbox"><div><p>Sometimes, we want to bring to the Clojure world functions and data from R packages. Here, we try to follow the <a href='https://github.com/cnuernber/libpython-clj/blob/master/test/libpython_clj/require_python_test.clj'>require-python</a> syntax of <a href='https://github.com/cnuernber/libpython-clj'>libpython-clj</a> (though currently in a less sophisticated way.)</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(require-r&nbsp;'[stats&nbsp;:as&nbsp;statz&nbsp;:refer&nbsp;[median]])</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;[1&nbsp;2&nbsp;3]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.stats/median</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[2]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[2]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;[1&nbsp;2&nbsp;3]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;statz/median</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[2]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[2]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;[1&nbsp;2&nbsp;3]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;median</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[2]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[2]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(require-r&nbsp;'[datasets&nbsp;:as&nbsp;datasetz&nbsp;:refer&nbsp;[euro]])</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;[r.datasets/euro&nbsp;datasetz/euro&nbsp;euro]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;apply&nbsp;=))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED</br>&nbsp;[&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ATS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BEF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FRF&nbsp;</br>&nbsp;&nbsp;13.760300&nbsp;&nbsp;&nbsp;40.339900&nbsp;&nbsp;&nbsp;&nbsp;1.955830&nbsp;&nbsp;166.386000&nbsp;&nbsp;&nbsp;&nbsp;5.945730&nbsp;&nbsp;&nbsp;&nbsp;6.559570&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IEP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ITL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LUF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NLG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PTE&nbsp;</br>&nbsp;&nbsp;&nbsp;0.787564&nbsp;1936.270000&nbsp;&nbsp;&nbsp;40.339900&nbsp;&nbsp;&nbsp;&nbsp;2.203710&nbsp;&nbsp;200.482000&nbsp;</br></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ATS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BEF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FRF&nbsp;</br>&nbsp;&nbsp;13.760300&nbsp;&nbsp;&nbsp;40.339900&nbsp;&nbsp;&nbsp;&nbsp;1.955830&nbsp;&nbsp;166.386000&nbsp;&nbsp;&nbsp;&nbsp;5.945730&nbsp;&nbsp;&nbsp;&nbsp;6.559570&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IEP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ITL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LUF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NLG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PTE&nbsp;</br>&nbsp;&nbsp;&nbsp;0.787564&nbsp;1936.270000&nbsp;&nbsp;&nbsp;40.339900&nbsp;&nbsp;&nbsp;&nbsp;2.203710&nbsp;&nbsp;200.482000&nbsp;</br></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ATS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BEF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FIM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FRF&nbsp;</br>&nbsp;&nbsp;13.760300&nbsp;&nbsp;&nbsp;40.339900&nbsp;&nbsp;&nbsp;&nbsp;1.955830&nbsp;&nbsp;166.386000&nbsp;&nbsp;&nbsp;&nbsp;5.945730&nbsp;&nbsp;&nbsp;&nbsp;6.559570&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IEP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ITL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LUF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NLG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PTE&nbsp;</br>&nbsp;&nbsp;&nbsp;0.787564&nbsp;1936.270000&nbsp;&nbsp;&nbsp;40.339900&nbsp;&nbsp;&nbsp;&nbsp;2.203710&nbsp;&nbsp;200.482000&nbsp;</br>]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(require-r&nbsp;'[base&nbsp;:refer&nbsp;[$]])</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->&nbsp;{:a&nbsp;1,&nbsp;:b&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($&nbsp;'a)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->>&nbsp;(check&nbsp;=&nbsp;[1])))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[1]]</code></div></div><div class="nspbox"><a id="data-visualization"> </a><div><h2>Data visualization</h2></div></div><div class="nspbox"><div><p>Functions creating R plots or any plotting objects generated by various R libraries can be wrapped in a way that returns an SVG, BufferedImage or can be saved to a file. All of them accept additional parameters specified in <code>grDevices</code> R package.</p></div></div><div class="nspbox"><div><p>Currently there is a bug that sometimes causes axes and labels to disappear when rendered inside a larger HTML.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(require-r&nbsp;'[graphics&nbsp;:refer&nbsp;[plot&nbsp;hist]])</br>&nbsp;(require-r&nbsp;'[ggplot2&nbsp;:refer&nbsp;[ggplot&nbsp;aes&nbsp;geom_point&nbsp;xlab&nbsp;ylab&nbsp;labs]])</br>&nbsp;(require&nbsp;'[clojisr.v1.applications.plotting&nbsp;:refer</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[plot->svg&nbsp;plot->file&nbsp;plot->buffered-image]])</code></div></div><div class="nspbox"><div><p>First example, simple plotting function as SVG string.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->svg&nbsp;(fn&nbsp;[]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->>&nbsp;rand</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(repeatedly&nbsp;30)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(reductions&nbsp;+)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(plot&nbsp;:xlab&nbsp;"t"&nbsp;:ylab&nbsp;"y"&nbsp;:type&nbsp;"l"))))</code></div><?xml version='1.0' encoding='UTF-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' class='svglite' width='720.00pt' height='576.00pt' viewBox='0 0 720.00 576.00'>
<defs>
  <style type='text/css'><![CDATA[
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #FFFFFF;'/>
<defs>
  <clipPath id='cpMC4wMHw3MjAuMDB8MC4wMHw1NzYuMDA='>
    <rect x='0.00' y='0.00' width='720.00' height='576.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw3MjAuMDB8MC4wMHw1NzYuMDA=)'>
</g>
<defs>
  <clipPath id='cpNTkuMDR8Njg5Ljc2fDU5LjA0fDUwMi41Ng=='>
    <rect x='59.04' y='59.04' width='630.72' height='443.52' />
  </clipPath>
</defs>
<g clip-path='url(#cpNTkuMDR8Njg5Ljc2fDU5LjA0fDUwMi41Ng==)'>
<polyline points='82.40,486.13 102.54,461.96 122.68,443.37 142.81,415.91 162.95,408.51 183.09,380.36 203.23,351.01 223.37,341.42 243.50,340.01 263.64,316.37 283.78,302.29 303.92,280.00 324.06,256.09 344.19,231.69 364.33,229.32 384.47,224.21 404.61,213.69 424.74,192.47 444.88,189.77 465.02,176.31 485.16,156.10 505.30,150.54 525.43,131.81 545.57,118.13 565.71,107.65 585.85,100.30 605.99,89.78 626.12,84.90 646.26,76.98 666.40,75.47 ' style='stroke-width: 0.75;' />
</g>
<g clip-path='url(#cpMC4wMHw3MjAuMDB8MC4wMHw1NzYuMDA=)'>
<line x1='62.26' y1='502.56' x2='666.40' y2='502.56' style='stroke-width: 0.75;' />
<line x1='62.26' y1='502.56' x2='62.26' y2='509.76' style='stroke-width: 0.75;' />
<line x1='162.95' y1='502.56' x2='162.95' y2='509.76' style='stroke-width: 0.75;' />
<line x1='263.64' y1='502.56' x2='263.64' y2='509.76' style='stroke-width: 0.75;' />
<line x1='364.33' y1='502.56' x2='364.33' y2='509.76' style='stroke-width: 0.75;' />
<line x1='465.02' y1='502.56' x2='465.02' y2='509.76' style='stroke-width: 0.75;' />
<line x1='565.71' y1='502.56' x2='565.71' y2='509.76' style='stroke-width: 0.75;' />
<line x1='666.40' y1='502.56' x2='666.40' y2='509.76' style='stroke-width: 0.75;' />
<text x='62.26' y='528.48' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='6.86px' lengthAdjust='spacingAndGlyphs'>0</text>
<text x='162.95' y='528.48' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='6.86px' lengthAdjust='spacingAndGlyphs'>5</text>
<text x='263.64' y='528.48' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='13.72px' lengthAdjust='spacingAndGlyphs'>10</text>
<text x='364.33' y='528.48' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='13.72px' lengthAdjust='spacingAndGlyphs'>15</text>
<text x='465.02' y='528.48' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='13.72px' lengthAdjust='spacingAndGlyphs'>20</text>
<text x='565.71' y='528.48' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='13.72px' lengthAdjust='spacingAndGlyphs'>25</text>
<text x='666.40' y='528.48' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='13.72px' lengthAdjust='spacingAndGlyphs'>30</text>
<line x1='59.04' y1='486.97' x2='59.04' y2='106.77' style='stroke-width: 0.75;' />
<line x1='59.04' y1='486.97' x2='51.84' y2='486.97' style='stroke-width: 0.75;' />
<line x1='59.04' y1='423.61' x2='51.84' y2='423.61' style='stroke-width: 0.75;' />
<line x1='59.04' y1='360.24' x2='51.84' y2='360.24' style='stroke-width: 0.75;' />
<line x1='59.04' y1='296.87' x2='51.84' y2='296.87' style='stroke-width: 0.75;' />
<line x1='59.04' y1='233.51' x2='51.84' y2='233.51' style='stroke-width: 0.75;' />
<line x1='59.04' y1='170.14' x2='51.84' y2='170.14' style='stroke-width: 0.75;' />
<line x1='59.04' y1='106.77' x2='51.84' y2='106.77' style='stroke-width: 0.75;' />
<text transform='translate(41.76,486.97) rotate(-90)' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='6.86px' lengthAdjust='spacingAndGlyphs'>0</text>
<text transform='translate(41.76,423.61) rotate(-90)' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='6.86px' lengthAdjust='spacingAndGlyphs'>2</text>
<text transform='translate(41.76,360.24) rotate(-90)' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='6.86px' lengthAdjust='spacingAndGlyphs'>4</text>
<text transform='translate(41.76,296.87) rotate(-90)' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='6.86px' lengthAdjust='spacingAndGlyphs'>6</text>
<text transform='translate(41.76,233.51) rotate(-90)' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='6.86px' lengthAdjust='spacingAndGlyphs'>8</text>
<text transform='translate(41.76,170.14) rotate(-90)' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='13.72px' lengthAdjust='spacingAndGlyphs'>10</text>
<text transform='translate(41.76,106.77) rotate(-90)' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='13.72px' lengthAdjust='spacingAndGlyphs'>12</text>
<polygon points='59.04,502.56 689.76,502.56 689.76,59.04 59.04,59.04 ' style='stroke-width: 0.75;' />
<text x='374.40' y='557.28' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='4.33px' lengthAdjust='spacingAndGlyphs'>t</text>
<text transform='translate(12.96,280.80) rotate(-90)' text-anchor='middle' style='font-size: 12.00px; font-family: "Arial";' textLength='6.12px' lengthAdjust='spacingAndGlyphs'>y</text>
</g>
</svg>
</div><div class="nspbox"><div><p>ggplot2 plots (or any other plot objects like lattice) can be also turned into SVG.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->svg</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[x&nbsp;(repeatedly&nbsp;99&nbsp;rand)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;(map&nbsp;+&nbsp;x&nbsp;(repeatedly&nbsp;99&nbsp;rand))]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;{:x&nbsp;x,&nbsp;:y&nbsp;y}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset/->dataset</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ggplot&nbsp;(aes&nbsp;:x&nbsp;x&nbsp;:y&nbsp;y&nbsp;:color&nbsp;'(+&nbsp;x&nbsp;y)&nbsp;:size&nbsp;'(/&nbsp;x&nbsp;y)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r+&nbsp;(geom_point)&nbsp;(xlab&nbsp;"x")&nbsp;(ylab&nbsp;"y")))))</code></div><?xml version='1.0' encoding='UTF-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' class='svglite' width='720.00pt' height='576.00pt' viewBox='0 0 720.00 576.00'>
<defs>
  <style type='text/css'><![CDATA[
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  ]]></style>
</defs>
<rect width='100%' height='100%' style='stroke: none; fill: #FFFFFF;'/>
<defs>
  <clipPath id='cpMC4wMHw3MjAuMDB8MC4wMHw1NzYuMDA='>
    <rect x='0.00' y='0.00' width='720.00' height='576.00' />
  </clipPath>
</defs>
<g clip-path='url(#cpMC4wMHw3MjAuMDB8MC4wMHw1NzYuMDA=)'>
<rect x='0.000000000000064' y='0.00' width='720.00' height='576.00' style='stroke-width: 1.07; stroke: #FFFFFF; fill: #FFFFFF;' />
</g>
<defs>
  <clipPath id='cpMzYuMDd8NjUyLjM5fDUuNDh8NTQzLjk1'>
    <rect x='36.07' y='5.48' width='616.32' height='538.47' />
  </clipPath>
</defs>
<g clip-path='url(#cpMzYuMDd8NjUyLjM5fDUuNDh8NTQzLjk1)'>
<rect x='36.07' y='5.48' width='616.32' height='538.47' style='stroke-width: 1.07; stroke: none; fill: #EBEBEB;' />
<polyline points='36.07,521.02 652.39,521.02 ' style='stroke-width: 0.53; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='36.07,355.94 652.39,355.94 ' style='stroke-width: 0.53; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='36.07,190.86 652.39,190.86 ' style='stroke-width: 0.53; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='36.07,25.79 652.39,25.79 ' style='stroke-width: 0.53; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='128.95,543.95 128.95,5.48 ' style='stroke-width: 0.53; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='271.12,543.95 271.12,5.48 ' style='stroke-width: 0.53; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='413.28,543.95 413.28,5.48 ' style='stroke-width: 0.53; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='555.44,543.95 555.44,5.48 ' style='stroke-width: 0.53; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='36.07,438.48 652.39,438.48 ' style='stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='36.07,273.40 652.39,273.40 ' style='stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='36.07,108.32 652.39,108.32 ' style='stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='57.87,543.95 57.87,5.48 ' style='stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='200.03,543.95 200.03,5.48 ' style='stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='342.20,543.95 342.20,5.48 ' style='stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='484.36,543.95 484.36,5.48 ' style='stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt;' />
<polyline points='626.52,543.95 626.52,5.48 ' style='stroke-width: 1.07; stroke: #FFFFFF; stroke-linecap: butt;' />
<circle cx='503.31' cy='32.77' r='5.02' style='stroke-width: 0.71; stroke: #52A8EB; fill: #52A8EB;' />
<circle cx='444.61' cy='255.99' r='5.74' style='stroke-width: 0.71; stroke: #3A79AC; fill: #3A79AC;' />
<circle cx='352.95' cy='287.73' r='5.37' style='stroke-width: 0.71; stroke: #336A98; fill: #336A98;' />
<circle cx='209.85' cy='405.19' r='4.99' style='stroke-width: 0.71; stroke: #22486A; fill: #22486A;' />
<circle cx='569.63' cy='181.98' r='5.94' style='stroke-width: 0.71; stroke: #4793CF; fill: #4793CF;' />
<circle cx='351.48' cy='371.52' r='6.04' style='stroke-width: 0.71; stroke: #2B5B84; fill: #2B5B84;' />
<circle cx='383.38' cy='179.42' r='4.99' style='stroke-width: 0.71; stroke: #3E80B6; fill: #3E80B6;' />
<circle cx='478.57' cy='237.75' r='5.82' style='stroke-width: 0.71; stroke: #3E80B5; fill: #3E80B5;' />
<circle cx='609.08' cy='64.14' r='5.56' style='stroke-width: 0.71; stroke: #54AEF3; fill: #54AEF3;' />
<circle cx='83.33' cy='486.21' r='3.24' style='stroke-width: 0.71; stroke: #153049; fill: #153049;' />
<circle cx='624.03' cy='118.58' r='5.85' style='stroke-width: 0.71; stroke: #50A5E7; fill: #50A5E7;' />
<circle cx='312.15' cy='264.09' r='4.95' style='stroke-width: 0.71; stroke: #336A98; fill: #336A98;' />
<circle cx='251.58' cy='487.98' r='6.75' style='stroke-width: 0.71; stroke: #1D3F5E; fill: #1D3F5E;' />
<circle cx='334.13' cy='429.01' r='6.59' style='stroke-width: 0.71; stroke: #265075; fill: #265075;' />
<circle cx='291.83' cy='313.88' r='5.09' style='stroke-width: 0.71; stroke: #2D5F89; fill: #2D5F89;' />
<circle cx='495.63' cy='51.64' r='5.05' style='stroke-width: 0.71; stroke: #4FA4E5; fill: #4FA4E5;' />
<circle cx='460.78' cy='73.36' r='4.97' style='stroke-width: 0.71; stroke: #4C9CDB; fill: #4C9CDB;' />
<circle cx='478.51' cy='130.44' r='5.27' style='stroke-width: 0.71; stroke: #4793CF; fill: #4793CF;' />
<circle cx='386.10' cy='260.88' r='5.42' style='stroke-width: 0.71; stroke: #3772A2; fill: #3772A2;' />
<circle cx='369.29' cy='258.71' r='5.30' style='stroke-width: 0.71; stroke: #3671A1; fill: #3671A1;' />
<circle cx='431.75' cy='111.20' r='4.97' style='stroke-width: 0.71; stroke: #4792CD; fill: #4792CD;' />
<circle cx='267.79' cy='176.50' r='4.25' style='stroke-width: 0.71; stroke: #3875A6; fill: #3875A6;' />
<circle cx='75.13' cy='450.62' r='2.65' style='stroke-width: 0.71; stroke: #183450; fill: #183450;' />
<circle cx='426.54' cy='154.07' r='5.12' style='stroke-width: 0.71; stroke: #4289C2; fill: #4289C2;' />
<circle cx='64.08' cy='357.74' r='1.42' style='stroke-width: 0.71; stroke: #1F4262; fill: #1F4262;' />
<circle cx='482.50' cy='329.77' r='6.54' style='stroke-width: 0.71; stroke: #36709F; fill: #36709F;' />
<circle cx='498.42' cy='278.09' r='6.20' style='stroke-width: 0.71; stroke: #3B7AAE; fill: #3B7AAE;' />
<circle cx='182.12' cy='412.28' r='4.70' style='stroke-width: 0.71; stroke: #204465; fill: #204465;' />
<circle cx='353.72' cy='379.79' r='6.14' style='stroke-width: 0.71; stroke: #2B5A83; fill: #2B5A83;' />
<circle cx='322.54' cy='193.92' r='4.69' style='stroke-width: 0.71; stroke: #3977AA; fill: #3977AA;' />
<circle cx='438.01' cy='81.99' r='4.90' style='stroke-width: 0.71; stroke: #4A98D5; fill: #4A98D5;' />
<circle cx='535.62' cy='91.17' r='5.37' style='stroke-width: 0.71; stroke: #4EA1E1; fill: #4EA1E1;' />
<circle cx='443.98' cy='103.48' r='5.00' style='stroke-width: 0.71; stroke: #4894D1; fill: #4894D1;' />
<circle cx='262.16' cy='419.46' r='5.74' style='stroke-width: 0.71; stroke: #234B6E; fill: #234B6E;' />
<circle cx='298.58' cy='224.98' r='4.66' style='stroke-width: 0.71; stroke: #356F9F; fill: #356F9F;' />
<circle cx='94.95' cy='303.74' r='2.72' style='stroke-width: 0.71; stroke: #254E72; fill: #254E72;' />
<circle cx='454.18' cy='317.06' r='6.25' style='stroke-width: 0.71; stroke: #356F9F; fill: #356F9F;' />
<circle cx='474.24' cy='43.07' r='4.93' style='stroke-width: 0.71; stroke: #4FA3E4; fill: #4FA3E4;' />
<circle cx='271.09' cy='193.94' r='4.34' style='stroke-width: 0.71; stroke: #3772A3; fill: #3772A3;' />
<circle cx='86.60' cy='519.47' r='3.75' style='stroke-width: 0.71; stroke: #132B43; fill: #132B43;' />
<circle cx='580.97' cy='81.45' r='5.52' style='stroke-width: 0.71; stroke: #51A7EA; fill: #51A7EA;' />
<circle cx='423.32' cy='243.95' r='5.55' style='stroke-width: 0.71; stroke: #3A79AC; fill: #3A79AC;' />
<circle cx='305.73' cy='203.72' r='4.62' style='stroke-width: 0.71; stroke: #3874A5; fill: #3874A5;' />
<circle cx='209.36' cy='337.44' r='4.48' style='stroke-width: 0.71; stroke: #275379; fill: #275379;' />
<circle cx='188.64' cy='383.23' r='4.55' style='stroke-width: 0.71; stroke: #234A6C; fill: #234A6C;' />
<circle cx='252.07' cy='204.77' r='4.24' style='stroke-width: 0.71; stroke: #356E9D; fill: #356E9D;' />
<circle cx='563.57' cy='29.96' r='5.26' style='stroke-width: 0.71; stroke: #55AFF5; fill: #55AFF5;' />
<circle cx='342.69' cy='259.75' r='5.14' style='stroke-width: 0.71; stroke: #356E9D; fill: #356E9D;' />
<circle cx='178.05' cy='419.00' r='4.70' style='stroke-width: 0.71; stroke: #1F4363; fill: #1F4363;' />
<circle cx='177.81' cy='313.03' r='4.00' style='stroke-width: 0.71; stroke: #28547B; fill: #28547B;' />
<circle cx='589.96' cy='195.95' r='6.11' style='stroke-width: 0.71; stroke: #4793CF; fill: #4793CF;' />
<circle cx='417.67' cy='111.14' r='4.90' style='stroke-width: 0.71; stroke: #4690CB; fill: #4690CB;' />
<circle cx='124.41' cy='467.72' r='4.25' style='stroke-width: 0.71; stroke: #193652; fill: #193652;' />
<circle cx='514.02' cy='41.26' r='5.10' style='stroke-width: 0.71; stroke: #51A8EB; fill: #51A8EB;' />
<circle cx='143.80' cy='238.87' r='3.32' style='stroke-width: 0.71; stroke: #2C5D87; fill: #2C5D87;' />
<circle cx='567.27' cy='188.61' r='5.97' style='stroke-width: 0.71; stroke: #4792CD; fill: #4792CD;' />
<circle cx='581.92' cy='51.03' r='5.40' style='stroke-width: 0.71; stroke: #54ADF2; fill: #54ADF2;' />
<circle cx='523.92' cy='129.14' r='5.48' style='stroke-width: 0.71; stroke: #4A98D6; fill: #4A98D6;' />
<circle cx='210.26' cy='501.06' r='6.43' style='stroke-width: 0.71; stroke: #1A3956; fill: #1A3956;' />
<circle cx='403.12' cy='155.19' r='5.00' style='stroke-width: 0.71; stroke: #4187BE; fill: #4187BE;' />
<circle cx='623.71' cy='55.98' r='5.58' style='stroke-width: 0.71; stroke: #56B1F7; fill: #56B1F7;' />
<circle cx='142.34' cy='367.83' r='3.81' style='stroke-width: 0.71; stroke: #22486A; fill: #22486A;' />
<circle cx='591.52' cy='190.81' r='6.09' style='stroke-width: 0.71; stroke: #4894D0; fill: #4894D0;' />
<circle cx='388.65' cy='101.48' r='4.72' style='stroke-width: 0.71; stroke: #458FC9; fill: #458FC9;' />
<circle cx='162.03' cy='491.27' r='5.36' style='stroke-width: 0.71; stroke: #193652; fill: #193652;' />
<circle cx='214.39' cy='298.62' r='4.32' style='stroke-width: 0.71; stroke: #2B5A83; fill: #2B5A83;' />
<circle cx='279.75' cy='469.40' r='6.71' style='stroke-width: 0.71; stroke: #204465; fill: #204465;' />
<circle cx='459.62' cy='109.65' r='5.10' style='stroke-width: 0.71; stroke: #4895D1; fill: #4895D1;' />
<circle cx='244.88' cy='240.42' r='4.32' style='stroke-width: 0.71; stroke: #316794; fill: #316794;' />
<circle cx='453.47' cy='68.81' r='4.92' style='stroke-width: 0.71; stroke: #4C9CDB; fill: #4C9CDB;' />
<circle cx='134.75' cy='356.38' r='3.64' style='stroke-width: 0.71; stroke: #22496B; fill: #22496B;' />
<circle cx='283.30' cy='432.42' r='6.13' style='stroke-width: 0.71; stroke: #234B6E; fill: #234B6E;' />
<circle cx='353.98' cy='387.72' r='6.23' style='stroke-width: 0.71; stroke: #2A5981; fill: #2A5981;' />
<circle cx='149.74' cy='503.17' r='5.33' style='stroke-width: 0.71; stroke: #17334E; fill: #17334E;' />
<circle cx='138.27' cy='483.00' r='4.74' style='stroke-width: 0.71; stroke: #183551; fill: #183551;' />
<circle cx='572.37' cy='272.57' r='6.55' style='stroke-width: 0.71; stroke: #3F83BA; fill: #3F83BA;' />
<circle cx='400.77' cy='312.20' r='5.87' style='stroke-width: 0.71; stroke: #336A98; fill: #336A98;' />
<circle cx='547.45' cy='294.20' r='6.59' style='stroke-width: 0.71; stroke: #3C7DB1; fill: #3C7DB1;' />
<circle cx='130.31' cy='504.72' r='4.91' style='stroke-width: 0.71; stroke: #16314B; fill: #16314B;' />
<circle cx='462.08' cy='246.80' r='5.78' style='stroke-width: 0.71; stroke: #3C7CB0; fill: #3C7CB0;' />
<circle cx='474.43' cy='341.25' r='6.60' style='stroke-width: 0.71; stroke: #346D9C; fill: #346D9C;' />
<circle cx='558.98' cy='264.63' r='6.42' style='stroke-width: 0.71; stroke: #3F83BA; fill: #3F83BA;' />
<circle cx='564.26' cy='250.35' r='6.34' style='stroke-width: 0.71; stroke: #4186BE; fill: #4186BE;' />
<circle cx='318.01' cy='246.58' r='4.90' style='stroke-width: 0.71; stroke: #346E9D; fill: #346E9D;' />
<circle cx='68.11' cy='489.29' r='2.47' style='stroke-width: 0.71; stroke: #142E47; fill: #142E47;' />
<circle cx='371.70' cy='389.57' r='6.40' style='stroke-width: 0.71; stroke: #2B5A83; fill: #2B5A83;' />
<circle cx='528.87' cy='323.56' r='6.76' style='stroke-width: 0.71; stroke: #3876A7; fill: #3876A7;' />
<circle cx='149.55' cy='421.08' r='4.28' style='stroke-width: 0.71; stroke: #1E405F; fill: #1E405F;' />
<circle cx='357.03' cy='158.97' r='4.76' style='stroke-width: 0.71; stroke: #3E81B7; fill: #3E81B7;' />
<circle cx='350.68' cy='192.19' r='4.86' style='stroke-width: 0.71; stroke: #3B7BAE; fill: #3B7BAE;' />
<circle cx='93.93' cy='348.57' r='2.83' style='stroke-width: 0.71; stroke: #214668; fill: #214668;' />
<circle cx='437.45' cy='296.31' r='5.98' style='stroke-width: 0.71; stroke: #3671A1; fill: #3671A1;' />
<circle cx='166.10' cy='215.76' r='3.51' style='stroke-width: 0.71; stroke: #30648F; fill: #30648F;' />
<circle cx='410.81' cy='85.91' r='4.78' style='stroke-width: 0.71; stroke: #4894D0; fill: #4894D0;' />
<circle cx='531.31' cy='150.26' r='5.61' style='stroke-width: 0.71; stroke: #4895D2; fill: #4895D2;' />
<circle cx='384.10' cy='123.95' r='4.78' style='stroke-width: 0.71; stroke: #438AC3; fill: #438AC3;' />
<circle cx='289.55' cy='427.99' r='6.14' style='stroke-width: 0.71; stroke: #244C6F; fill: #244C6F;' />
<circle cx='624.38' cy='80.17' r='5.68' style='stroke-width: 0.71; stroke: #54ACF1; fill: #54ACF1;' />
<circle cx='85.74' cy='409.90' r='2.85' style='stroke-width: 0.71; stroke: #1C3C5A; fill: #1C3C5A;' />
</g>
<g clip-path='url(#cpMC4wMHw3MjAuMDB8MC4wMHw1NzYuMDA=)'>
<text x='31.14' y='441.62' text-anchor='end' style='font-size: 8.80px;fill: #4D4D4D; font-family: "Arial";' textLength='12.42px' lengthAdjust='spacingAndGlyphs'>0.5</text>
<text x='31.14' y='276.54' text-anchor='end' style='font-size: 8.80px;fill: #4D4D4D; font-family: "Arial";' textLength='12.42px' lengthAdjust='spacingAndGlyphs'>1.0</text>
<text x='31.14' y='111.47' text-anchor='end' style='font-size: 8.80px;fill: #4D4D4D; font-family: "Arial";' textLength='12.42px' lengthAdjust='spacingAndGlyphs'>1.5</text>
<polyline points='33.33,438.48 36.07,438.48 ' style='stroke-width: 1.07; stroke: #333333; stroke-linecap: butt;' />
<polyline points='33.33,273.40 36.07,273.40 ' style='stroke-width: 1.07; stroke: #333333; stroke-linecap: butt;' />
<polyline points='33.33,108.32 36.07,108.32 ' style='stroke-width: 1.07; stroke: #333333; stroke-linecap: butt;' />
<polyline points='57.87,546.69 57.87,543.95 ' style='stroke-width: 1.07; stroke: #333333; stroke-linecap: butt;' />
<polyline points='200.03,546.69 200.03,543.95 ' style='stroke-width: 1.07; stroke: #333333; stroke-linecap: butt;' />
<polyline points='342.20,546.69 342.20,543.95 ' style='stroke-width: 1.07; stroke: #333333; stroke-linecap: butt;' />
<polyline points='484.36,546.69 484.36,543.95 ' style='stroke-width: 1.07; stroke: #333333; stroke-linecap: butt;' />
<polyline points='626.52,546.69 626.52,543.95 ' style='stroke-width: 1.07; stroke: #333333; stroke-linecap: butt;' />
<text x='57.87' y='555.17' text-anchor='middle' style='font-size: 8.80px;fill: #4D4D4D; font-family: "Arial";' textLength='17.45px' lengthAdjust='spacingAndGlyphs'>0.00</text>
<text x='200.03' y='555.17' text-anchor='middle' style='font-size: 8.80px;fill: #4D4D4D; font-family: "Arial";' textLength='17.45px' lengthAdjust='spacingAndGlyphs'>0.25</text>
<text x='342.20' y='555.17' text-anchor='middle' style='font-size: 8.80px;fill: #4D4D4D; font-family: "Arial";' textLength='17.45px' lengthAdjust='spacingAndGlyphs'>0.50</text>
<text x='484.36' y='555.17' text-anchor='middle' style='font-size: 8.80px;fill: #4D4D4D; font-family: "Arial";' textLength='17.45px' lengthAdjust='spacingAndGlyphs'>0.75</text>
<text x='626.52' y='555.17' text-anchor='middle' style='font-size: 8.80px;fill: #4D4D4D; font-family: "Arial";' textLength='17.45px' lengthAdjust='spacingAndGlyphs'>1.00</text>
<text x='344.23' y='567.88' text-anchor='middle' style='font-size: 11.00px; font-family: "Arial";' textLength='5.82px' lengthAdjust='spacingAndGlyphs'>x</text>
<text transform='translate(13.33,274.71) rotate(-90)' text-anchor='middle' style='font-size: 11.00px; font-family: "Arial";' textLength='5.61px' lengthAdjust='spacingAndGlyphs'>y</text>
<rect x='663.35' y='173.18' width='51.17' height='78.78' style='stroke-width: 1.07; stroke: none; fill: #FFFFFF;' />
<text x='668.83' y='187.83' style='font-size: 11.00px; font-family: "Arial";' textLength='22.11px' lengthAdjust='spacingAndGlyphs'>(x/y)</text>
<rect x='668.83' y='194.64' width='17.28' height='17.28' style='stroke-width: 1.07; stroke: none; fill: #F2F2F2;' />
<circle cx='677.47' cy='203.28' r='4.06' style='stroke-width: 0.71; fill: #000000;' />
<rect x='668.83' y='211.92' width='17.28' height='17.28' style='stroke-width: 1.07; stroke: none; fill: #F2F2F2;' />
<circle cx='677.47' cy='220.56' r='5.21' style='stroke-width: 0.71; fill: #000000;' />
<rect x='668.83' y='229.20' width='17.28' height='17.28' style='stroke-width: 1.07; stroke: none; fill: #F2F2F2;' />
<circle cx='677.47' cy='237.84' r='6.09' style='stroke-width: 0.71; fill: #000000;' />
<text x='691.59' y='206.42' style='font-size: 8.80px; font-family: "Arial";' textLength='17.45px' lengthAdjust='spacingAndGlyphs'>0.25</text>
<text x='691.59' y='223.70' style='font-size: 8.80px; font-family: "Arial";' textLength='17.45px' lengthAdjust='spacingAndGlyphs'>0.50</text>
<text x='691.59' y='240.98' style='font-size: 8.80px; font-family: "Arial";' textLength='17.45px' lengthAdjust='spacingAndGlyphs'>0.75</text>
<rect x='663.35' y='262.91' width='46.14' height='113.34' style='stroke-width: 1.07; stroke: none; fill: #FFFFFF;' />
<image width='17.28' height='86.40' x='668.83' y='284.37' preserveAspectRatio='none' xlink:href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAEsCAYAAAACUNnVAAAAmElEQVQ4ja2UQRLDMAgDd3hk/tnX5agcknFaCoa0vnkMCEnGsL12GQhDYDpPwoDrpBFlRDWi/9Wu6AHC9FkLYLrzlhD3oJ3mDvRHRYy7IC8A7bCK8gpWKYDzeQVArDcDyD2YAnSofZvzaOA6Q7Oahp/dmRuVTQ0xU5TGP2o8Waool1obVuv1q8qP9xPvg633XlGLDtfIhNUBcBeA5ss0BXMAAAAASUVORK5CYII='/>
<text x='691.59' y='366.63' style='font-size: 8.80px; font-family: "Arial";' textLength='12.42px' lengthAdjust='spacingAndGlyphs'>0.5</text>
<text x='691.59' y='348.29' style='font-size: 8.80px; font-family: "Arial";' textLength='12.42px' lengthAdjust='spacingAndGlyphs'>1.0</text>
<text x='691.59' y='329.96' style='font-size: 8.80px; font-family: "Arial";' textLength='12.42px' lengthAdjust='spacingAndGlyphs'>1.5</text>
<text x='691.59' y='311.62' style='font-size: 8.80px; font-family: "Arial";' textLength='12.42px' lengthAdjust='spacingAndGlyphs'>2.0</text>
<text x='691.59' y='293.29' style='font-size: 8.80px; font-family: "Arial";' textLength='12.42px' lengthAdjust='spacingAndGlyphs'>2.5</text>
<text x='668.83' y='277.57' style='font-size: 11.00px; font-family: "Arial";' textLength='30.03px' lengthAdjust='spacingAndGlyphs'>(x + y)</text>
<line x1='668.83' y1='363.48' x2='672.28' y2='363.48' style='stroke-width: 0.38; stroke: #FFFFFF; stroke-linecap: butt;' />
<line x1='668.83' y1='345.15' x2='672.28' y2='345.15' style='stroke-width: 0.38; stroke: #FFFFFF; stroke-linecap: butt;' />
<line x1='668.83' y1='326.81' x2='672.28' y2='326.81' style='stroke-width: 0.38; stroke: #FFFFFF; stroke-linecap: butt;' />
<line x1='668.83' y1='308.48' x2='672.28' y2='308.48' style='stroke-width: 0.38; stroke: #FFFFFF; stroke-linecap: butt;' />
<line x1='668.83' y1='290.15' x2='672.28' y2='290.15' style='stroke-width: 0.38; stroke: #FFFFFF; stroke-linecap: butt;' />
<line x1='682.65' y1='363.48' x2='686.11' y2='363.48' style='stroke-width: 0.38; stroke: #FFFFFF; stroke-linecap: butt;' />
<line x1='682.65' y1='345.15' x2='686.11' y2='345.15' style='stroke-width: 0.38; stroke: #FFFFFF; stroke-linecap: butt;' />
<line x1='682.65' y1='326.81' x2='686.11' y2='326.81' style='stroke-width: 0.38; stroke: #FFFFFF; stroke-linecap: butt;' />
<line x1='682.65' y1='308.48' x2='686.11' y2='308.48' style='stroke-width: 0.38; stroke: #FFFFFF; stroke-linecap: butt;' />
<line x1='682.65' y1='290.15' x2='686.11' y2='290.15' style='stroke-width: 0.38; stroke: #FFFFFF; stroke-linecap: butt;' />
</g>
</svg>
</div><div class="nspbox"><div><p>Any plot (function or object) can be saved to file or converted to BufferedImage object.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;(plot->file&nbsp;(str&nbsp;target-path&nbsp;"histogram.jpg")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fn&nbsp;[]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(hist&nbsp;[1&nbsp;1&nbsp;1&nbsp;1&nbsp;2&nbsp;3&nbsp;4&nbsp;5]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:main&nbsp;"Histogram"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"data:&nbsp;[1&nbsp;1&nbsp;1&nbsp;1&nbsp;2&nbsp;3&nbsp;4&nbsp;5]"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:width&nbsp;800</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:height&nbsp;400</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:quality&nbsp;50))</code></div><div class="nspout"><code class="prettyprint lang-clj">{:breaks&nbsp;[1&nbsp;2&nbsp;3&nbsp;4&nbsp;5],</br>&nbsp;:counts&nbsp;[5&nbsp;1&nbsp;1&nbsp;1],</br>&nbsp;:density&nbsp;[0.625&nbsp;0.125&nbsp;0.125&nbsp;0.125],</br>&nbsp;:mids&nbsp;[1.5&nbsp;2.5&nbsp;3.5&nbsp;4.5],</br>&nbsp;:xname&nbsp;["c(1L,&nbsp;1L,&nbsp;1L,&nbsp;1L,&nbsp;2L,&nbsp;3L,&nbsp;4L,&nbsp;5L)"],</br>&nbsp;:equidist&nbsp;[true]}</code></div></div><div class="nspbox"><image src="histogram.jpg"></image></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->buffered-image&nbsp;(fn&nbsp;[]&nbsp;(hist&nbsp;[1&nbsp;1&nbsp;1&nbsp;1&nbsp;2&nbsp;3&nbsp;4&nbsp;5]))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:width&nbsp;222</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:height&nbsp;149)</code></div><div class="nspout"><code class="prettyprint lang-clj">#object[java.awt.image.BufferedImage&nbsp;0x7e60b227&nbsp;"BufferedImage@7e60b227:&nbsp;type&nbsp;=&nbsp;2&nbsp;DirectColorModel:&nbsp;rmask=ff0000&nbsp;gmask=ff00&nbsp;bmask=ff&nbsp;amask=ff000000&nbsp;IntegerInterleavedRaster:&nbsp;width&nbsp;=&nbsp;222&nbsp;height&nbsp;=&nbsp;149&nbsp;#Bands&nbsp;=&nbsp;4&nbsp;xOff&nbsp;=&nbsp;0&nbsp;yOff&nbsp;=&nbsp;0&nbsp;dataOffset[0]&nbsp;0"]</code></div></div><div class="nspbox"><a id="intermediary-representation-as-Java-objects"> </a><div><h2>Intermediary representation as Java objects.</h2></div></div><div class="nspbox"><div><p>Clojisr relies on the fact of an intemediary representation of java, as Java objects. This is usually hidden from the user, but may be useful sometimes. In the current implementation, this is based on <a href='https://github.com/s-u/REngine'>REngine</a>.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(import&nbsp;(org.rosuda.REngine&nbsp;REXP&nbsp;REXPInteger&nbsp;REXPDouble))</code></div></div><div class="nspbox"><div><p>We can convert data between R and Java.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"1:9"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;REXPInteger))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;org.rosuda.REngine.REXPInteger]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(REXPInteger.&nbsp;1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[1]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[1]]</code></div></div><div class="nspbox"><div><p>We can further convert data from the java representation to Clojure.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"1:9"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;(range&nbsp;1&nbsp;10)))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[1&nbsp;2&nbsp;3&nbsp;4&nbsp;5&nbsp;6&nbsp;7&nbsp;8&nbsp;9]]</code></div></div><div class="nspbox"><div><p>On the opposite direction, we can also convert Clojure data into the Java represenattion.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(range&nbsp;1&nbsp;10)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clj->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;REXPInteger))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;org.rosuda.REngine.REXPInteger]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(range&nbsp;1&nbsp;10)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clj->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;(range&nbsp;1&nbsp;10)))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[1&nbsp;2&nbsp;3&nbsp;4&nbsp;5&nbsp;6&nbsp;7&nbsp;8&nbsp;9]]</code></div></div><div class="nspbox"><div><p>There is an alternative way of conversion from Java to Clojure, naively converting the internal Java representation to a Clojure data structure. It can be handy when one wants to have plain access to all the metadata (R attributes), etc. </p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"1:9"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->native-clj)</code></div><div class="nspout"><code class="prettyprint lang-clj">[1,&nbsp;2,&nbsp;3,&nbsp;4,&nbsp;5,&nbsp;6,&nbsp;7,&nbsp;8,&nbsp;9]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"data.frame(x=1:3,y=factor('a','a','b'))"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->native-clj)</code></div><div class="nspout"><code class="prettyprint lang-clj">{:x&nbsp;[1,&nbsp;2,&nbsp;3],&nbsp;:y&nbsp;[1,&nbsp;1,&nbsp;1]}</code></div></div><div class="nspbox"><div><p>We can evaluate R code and immediately return the result as a java object, without ever creating a handle to an R object holding the result:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"1+2"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval-r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;REXPDouble))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;org.rosuda.REngine.REXPDouble]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"1+2"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval-r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(.asDoubles)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[3.0]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[3.0]]</code></div></div><div class="nspbox"><a id="more-data-conversion-examples"> </a><div><h2>More data conversion examples</h2></div></div><div class="nspbox"><div><p>Convertion between R and Clojure always passes through Java. To stress this, we write it explicitly in the following examples.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"list(a=1:2,b='hi!')"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;{:a&nbsp;[1&nbsp;2],&nbsp;:b&nbsp;["hi!"]}))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;{:a&nbsp;[1&nbsp;2],&nbsp;:b&nbsp;["hi!"]}]</code></div></div><div class="nspbox"><div><p>Partially named lists are also supported</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"list(a=1:2,'hi!')"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;{:a&nbsp;[1&nbsp;2],&nbsp;1&nbsp;["hi!"]}))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;{:a&nbsp;[1&nbsp;2],&nbsp;1&nbsp;["hi!"]}]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;"table(c('a','b','a','b','a','b','a','b'),&nbsp;c(1,1,2,2,3,3,1,1))"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset/mapseq-reader</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#{{0&nbsp;"a",&nbsp;1&nbsp;"2",&nbsp;:$value&nbsp;2}&nbsp;{0&nbsp;"b",&nbsp;1&nbsp;"3",&nbsp;:$value&nbsp;1}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{0&nbsp;"a",&nbsp;1&nbsp;"1",&nbsp;:$value&nbsp;2}&nbsp;{0&nbsp;"a",&nbsp;1&nbsp;"3",&nbsp;:$value&nbsp;1}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{0&nbsp;"b",&nbsp;1&nbsp;"2",&nbsp;:$value&nbsp;1}&nbsp;{0&nbsp;"b",&nbsp;1&nbsp;"1",&nbsp;:$value&nbsp;1}}))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED</br>&nbsp;#{{0&nbsp;"a",&nbsp;1&nbsp;"2",&nbsp;:$value&nbsp;2}</br>&nbsp;&nbsp;&nbsp;{0&nbsp;"b",&nbsp;1&nbsp;"3",&nbsp;:$value&nbsp;1}</br>&nbsp;&nbsp;&nbsp;{0&nbsp;"a",&nbsp;1&nbsp;"1",&nbsp;:$value&nbsp;2}</br>&nbsp;&nbsp;&nbsp;{0&nbsp;"a",&nbsp;1&nbsp;"3",&nbsp;:$value&nbsp;1}</br>&nbsp;&nbsp;&nbsp;{0&nbsp;"b",&nbsp;1&nbsp;"2",&nbsp;:$value&nbsp;1}</br>&nbsp;&nbsp;&nbsp;{0&nbsp;"b",&nbsp;1&nbsp;"1",&nbsp;:$value&nbsp;1}}]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;{:a&nbsp;[1&nbsp;2],&nbsp;:b&nbsp;"hi!"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clj->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;{:a&nbsp;[1&nbsp;2],&nbsp;:b&nbsp;["hi!"]}))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;{:a&nbsp;[1&nbsp;2],&nbsp;:b&nbsp;["hi!"]}]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;{:a&nbsp;[1&nbsp;2],&nbsp;:b&nbsp;"hi!"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clj->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((r&nbsp;"deparse"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->java</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java->clj)</code></div><div class="nspout"><code class="prettyprint lang-clj">["list(a&nbsp;=&nbsp;1:2,&nbsp;b&nbsp;=&nbsp;\"hi!\")"]</code></div></div><div class="nspbox"><div><h3>Basic types convertion clj->r->clj</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;clj->r->clj&nbsp;(comp&nbsp;r->clj&nbsp;r))</code></div><div class="nspout"><code class="prettyprint lang-clj">#'clojisr.v1.tutorial-test/clj->r->clj</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(clj->r->clj&nbsp;nil)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;nil))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;nil]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(clj->r->clj&nbsp;[10&nbsp;11])</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[10&nbsp;11]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[10&nbsp;11]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(clj->r->clj&nbsp;[10.0&nbsp;11.0])</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[10.0&nbsp;11.0]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[10.0&nbsp;11.0]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(clj->r->clj&nbsp;(list&nbsp;10.0&nbsp;11.0))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[10.0&nbsp;11.0]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[10.0&nbsp;11.0]]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(clj->r->clj&nbsp;{:a&nbsp;1,&nbsp;:b&nbsp;2})</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;{:a&nbsp;[1],&nbsp;:b&nbsp;[2]}))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;{:a&nbsp;[1],&nbsp;:b&nbsp;[2]}]</code></div></div><div class="nspbox"><div><h3>Various R objects</h3></div></div><div class="nspbox"><div><p>Named list</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(r&nbsp;"list(a=1L,b=c(10,20),c='hi!')")&nbsp;;;&nbsp;named&nbsp;list</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;{:a&nbsp;[1],&nbsp;:b&nbsp;[10.0&nbsp;20.0],&nbsp;:c&nbsp;["hi!"]}))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;{:a&nbsp;[1],&nbsp;:b&nbsp;[10.0&nbsp;20.0],&nbsp;:c&nbsp;["hi!"]}]</code></div></div><div class="nspbox"><div><p>Array of doubles</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(r&nbsp;"c(10,20,30)")&nbsp;;;&nbsp;array&nbsp;of&nbsp;doubles</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[10.0&nbsp;20.0&nbsp;30.0]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[10.0&nbsp;20.0&nbsp;30.0]]</code></div></div><div class="nspbox"><div><p>Array of longs</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(r&nbsp;"c(10L,20L,30L)")&nbsp;;;&nbsp;array&nbsp;of&nbsp;longs</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[10&nbsp;20&nbsp;30]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[10&nbsp;20&nbsp;30]]</code></div></div><div class="nspbox"><div><p>Timeseries</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(r&nbsp;'euro)&nbsp;;;&nbsp;timeseries</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;13.7603))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;13.7603]</code></div></div><div class="nspbox"><div><p>Pairlist</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(r.base/formals&nbsp;r.stats/dnorm)&nbsp;;;&nbsp;pairlist</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keys</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;'(:log&nbsp;:mean&nbsp;:sd&nbsp;:x)))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;(:log&nbsp;:mean&nbsp;:sd&nbsp;:x)]</code></div></div><div class="nspbox"><div><p>NULL</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(r&nbsp;"NULL")&nbsp;;;&nbsp;null</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;nil))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;nil]</code></div></div><div class="nspbox"><div><p>TRUE/FALSE</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;(r&nbsp;"TRUE")&nbsp;;;&nbsp;true/false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;[true]))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;[true]]</code></div></div><div class="nspbox"><a id="inspecting-R-functions"> </a><div><h2>Inspecting R functions</h2></div></div><div class="nspbox"><div><p>The <code>mean</code> function is defined to expect arguments <code>x</code> and <code>...</code>. These arguments have no default values (thus, its formals have empty symbols as values):</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->>&nbsp;'mean</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.base/formals</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(check&nbsp;=&nbsp;{:x&nbsp;(symbol&nbsp;""),&nbsp;:...&nbsp;(symbol&nbsp;"")}))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;{:x&nbsp;,&nbsp;:...&nbsp;}]</code></div></div><div class="nspbox"><div><p>It is an <a href='http://adv-r.had.co.nz/S3.html'>S3 generic function</a> function, which we can realize by printing it:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r&nbsp;'mean)</code></div><div class="nspout"><code class="prettyprint lang-clj">function&nbsp;(x,&nbsp;...)&nbsp;</br>UseMethod("mean")</br><bytecode:&nbsp;0x56468265c910></br><environment:&nbsp;namespace:base></code></div></div><div class="nspbox"><div><p>So, we can expect possibly more details when inspecting its default implementation. Now, we see some arguments that do have default values.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->></br>&nbsp;&nbsp;&nbsp;'mean.default</br>&nbsp;&nbsp;&nbsp;r.base/formals</br>&nbsp;&nbsp;&nbsp;r->clj</br>&nbsp;&nbsp;&nbsp;(check</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:x&nbsp;(symbol&nbsp;""),&nbsp;:trim&nbsp;[0.0],&nbsp;:na.rm&nbsp;[false],&nbsp;:...&nbsp;(symbol&nbsp;"")}))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED&nbsp;{:x&nbsp;,&nbsp;:trim&nbsp;[0.0],&nbsp;:na.rm&nbsp;[false],&nbsp;:...&nbsp;}]</code></div></div><div class="nspbox"><a id="R-function-arglists"> </a><div><h2>R-function-arglists</h2></div></div><div class="nspbox"><div><p>As we saw earlier, R functions are Clojure functions. The arglists of functions brought up by <code>require-r</code> match the expected arguments. Here are some examples:</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(require-r&nbsp;'[base]&nbsp;'[stats]&nbsp;'[grDevices])</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(->></br>&nbsp;&nbsp;&nbsp;[#'r.base/mean&nbsp;#'r.base/mean-default&nbsp;#'r.stats/arima0</br>&nbsp;&nbsp;&nbsp;&nbsp;#'r.grDevices/dev-off&nbsp;#'r.base/Sys-info&nbsp;#'r.base/summary-default</br>&nbsp;&nbsp;&nbsp;&nbsp;;;&nbsp;Primitive&nbsp;functions:</br>&nbsp;&nbsp;&nbsp;&nbsp;#'r.base/sin&nbsp;#'r.base/sum]</br>&nbsp;&nbsp;&nbsp;(map&nbsp;(fn&nbsp;[f]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;f</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meta</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(update&nbsp;:ns&nbsp;(comp&nbsp;symbol&nbsp;str)))))</br>&nbsp;&nbsp;&nbsp;(check</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'({:arglists&nbsp;([x&nbsp;&&nbsp;{:keys&nbsp;[...]}]),&nbsp;:name&nbsp;mean,&nbsp;:ns&nbsp;r.base}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:arglists&nbsp;([x&nbsp;&&nbsp;{:keys&nbsp;[trim&nbsp;na.rm&nbsp;...]}]),</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;mean-default,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ns&nbsp;r.base}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:arglists&nbsp;([x&nbsp;&</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:keys&nbsp;[order&nbsp;seasonal&nbsp;xreg&nbsp;include.mean&nbsp;delta</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform.pars&nbsp;fixed&nbsp;init&nbsp;method&nbsp;n.cond</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optim.control]}]),</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;arima0,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ns&nbsp;r.stats}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:arglists&nbsp;([&&nbsp;{:keys&nbsp;[which]}]),&nbsp;:name&nbsp;dev-off,&nbsp;:ns&nbsp;r.grDevices}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:arglists&nbsp;([]),&nbsp;:name&nbsp;Sys-info,&nbsp;:ns&nbsp;r.base}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:arglists&nbsp;([object&nbsp;&&nbsp;{:keys&nbsp;[...&nbsp;digits&nbsp;quantile.type]}]),</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;summary-default,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ns&nbsp;r.base}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:arglists&nbsp;([x]),&nbsp;:name&nbsp;sin,&nbsp;:ns&nbsp;r.base}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:arglists&nbsp;([&&nbsp;{:keys&nbsp;[...&nbsp;na.rm]}]),&nbsp;:name&nbsp;sum,&nbsp;:ns&nbsp;r.base})))</code></div><div class="nspout"><code class="prettyprint lang-clj">[:PASSED</br>&nbsp;({:arglists&nbsp;([x&nbsp;&&nbsp;{:keys&nbsp;[...]}]),&nbsp;:name&nbsp;mean,&nbsp;:ns&nbsp;r.base}</br>&nbsp;&nbsp;{:arglists&nbsp;([x&nbsp;&&nbsp;{:keys&nbsp;[trim&nbsp;na.rm&nbsp;...]}]),</br>&nbsp;&nbsp;&nbsp;:name&nbsp;mean-default,</br>&nbsp;&nbsp;&nbsp;:ns&nbsp;r.base}</br>&nbsp;&nbsp;{:arglists</br>&nbsp;&nbsp;&nbsp;([x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:keys</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[order</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seasonal</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xreg</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include.mean</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform.pars</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixed</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n.cond</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optim.control]}]),</br>&nbsp;&nbsp;&nbsp;:name&nbsp;arima0,</br>&nbsp;&nbsp;&nbsp;:ns&nbsp;r.stats}</br>&nbsp;&nbsp;{:arglists&nbsp;([&&nbsp;{:keys&nbsp;[which]}]),&nbsp;:name&nbsp;dev-off,&nbsp;:ns&nbsp;r.grDevices}</br>&nbsp;&nbsp;{:arglists&nbsp;([]),&nbsp;:name&nbsp;Sys-info,&nbsp;:ns&nbsp;r.base}</br>&nbsp;&nbsp;{:arglists&nbsp;([object&nbsp;&&nbsp;{:keys&nbsp;[...&nbsp;digits&nbsp;quantile.type]}]),</br>&nbsp;&nbsp;&nbsp;:name&nbsp;summary-default,</br>&nbsp;&nbsp;&nbsp;:ns&nbsp;r.base}</br>&nbsp;&nbsp;{:arglists&nbsp;([x]),&nbsp;:name&nbsp;sin,&nbsp;:ns&nbsp;r.base}</br>&nbsp;&nbsp;{:arglists&nbsp;([&&nbsp;{:keys&nbsp;[...&nbsp;na.rm]}]),&nbsp;:name&nbsp;sum,&nbsp;:ns&nbsp;r.base})]</code></div></div><hr /><div>Checks: <b class="PASSED">60 PASSED </b><hr /></div><div><i><small><a href="https://github.com/scicloj/clojisr/tree/master/test/clojisr/v1/tutorial_test.clj">clojisr.v1.tutorial-test</a> - created by <a href="https://github.com/scicloj/notespace">notespace</a>, Sun Nov 26 20:33:16 CET 2023.</small></i><hr /></div></div></body></html></html>